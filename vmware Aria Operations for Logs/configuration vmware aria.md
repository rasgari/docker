# configuration vmware aria

# پیکربندی یا کانفیگ با داکر

اگرچه نصب رسمی Aria Operations for Logs بیشتر روی محیط مجازی انجام می‌شود، اما بخش‌هایی از ارجاع به وضعیت کانتینری نیز موجود است. برای ترکیب با داکر می‌توانید این روال را در نظر بگیرید:
سناریو: ارسال لاگ از اپلیکیشن داکری به Aria
از plugin یا خروجی‌های Fluentd/Fluent Bit به Aria استفاده کنید؛ برای مثال پلاگین Ruby تحت عنوان fluent-plugin-vmware-loginsight وجود دارد. 

مثال یک فایل Dockerfile یا کانتینر Fluentd:

```
FROM fluent/fluentd:v1.XX
RUN gem install fluent-plugin-vmware-loginsight
COPY fluent.conf /fluentd/etc/
```

در fluent.conf:
```
<match **>
  @type vmware_loginsight
  host ARIA_HOST
  port 9543
  agent_id YOUR_AGENT_ID
  log_text_keys ["message","log"]
  ssl_verify true
</match>
```
کانفیگ ارسال لاگ‌ها

مطمئن شوید در Aria Operations for Logs بخش “Agents” یا “Log Sources” تنظیم شده است تا دریافت داده‌ها از کانتینر ممکن باشد. 
اگر کانتینرها بر روی داکر یا Kubernetes اجرا می‌شوند، می‌توان لاگ‌ها را به‌صورت forwarded (مثلاً syslog, TCP/UDP) به Aria ارسال کرد.

نکات اضافی
دسترسی شبکه از کانتینر به سرور Aria باید باز باشد (پورت مربوطه).
حفظ منابع و بهینه‌سازی: کانتینر Fluentd نباید بار زیادی ایجاد کند؛ تنظیم buffer و فلشینگ منطقی باشند.
مانیتورینگ ارسال لاگ‌ها و سلامت کانتینر را فراموش نکنید.

---

# تحلیل لاگ‌ها

پس از نصب و پیکربندی، مراحل تحلیل لاگ‌ها شامل موارد زیر است:
جمع‌آوری و ایندکس‌گذاری
محصول قادر است حجم بسیار زیاد لاگ‌ها را دریافت، ساختاربندی و ایندکس کند. 
فیلترها، Masks و Storage Policies قابل تعریف هستند. 

---

# داشبوردها و پرس‌وجوها

از UI موجود برای جستجو در میان لاگ‌ها، تعریف پرس‌وجو (query) و ایجاد داشبورد استفاده کنید.
تعریف Alert‌ها بر اساس شرایط خاص از لاگ‌ها امکان‌پذیر است. 
مثال کاربردی
فرض کنید می‌خواهید خطاهایی که در سرویس X رخ داده‌اند را فیلتر کنید:
```
severity = ERROR AND service = X
```
سپس می‌توانید نمودار تعداد رخدادها بر حسب زمان را ایجاد کنید و Threshold برای Alert تعریف کنید.
نگهداری و تحلیل تاریخی
امکان اعمال Retention روی داده‌های ایندکس‌شده وجود دارد تا فضای ذخیره‌سازی کنترل شود. 
همچنین امکان ترک لاگ‌های قدیمی‌تر یا تبدیل آنها به Archive وجود دارد.
