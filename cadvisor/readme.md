# cadvisor

๐ cAdvisor ฺุณุชุ (Container Advisor)

cAdvisor ุง Container Advisor ฺฉ ุณุฑูุณ ูุชูโุจุงุฒ ุงุฒ ฺฏูฺฏู ุงุณุช ฺฉู ุฑู ุณุฑูุฑ (ุง ุฏุงุฎู Docker) ุงุฌุฑุง ูโุดูุฏ ู ฺฉุงุฑุด ูุงูุชูุฑูฺฏ ุฒูุฏูู ฺฉุงูุชูุฑูุง Docker ุงุณุช.

ุงู ุงุจุฒุงุฑ ุงุทูุงุนุงุช ุฏูู ู Real-Time ุฏุฑุจุงุฑู:

ูุตุฑู CPU

ูุตุฑู RAM

ูุตุฑู ุฏุณฺฉ

ูุตุฑู ุดุจฺฉู

ูุงูโุณุณุชู

ุชุนุฏุงุฏ ูุฑุงูุฏูุง

ูุงูโุณุงฺฉู ฺฉุงูุชูุฑูุง

ุฑุง ุฌูุนโุขูุฑ ูโฺฉูุฏ.

Major Benefitุ
โ ูุงูุชูุฑูฺฏ ุฏูู ูุฑ ฺฉุงูุชูุฑ ุจูโุตูุฑุช ุฌุฏุงฺฏุงูู
โ ุฏุงฺฏโูุง Docker ุงุทูุงุนุงุช ฺฉุงูู ููโุฏููุฏ โ cAdvisor ูโุฏูุฏ

๐ง cAdvisor ฺู ฺฉุงุฑ ุฏุฑ ุณุฑูุฑ ุงูุฌุงู ูโุฏูุฏุ

ููุช ุฑู ุณุฑูุฑ ูุตุจ ูโุดูุฏ:

โ 1) ูุงูุชูุฑูฺฏ Performance ฺฉุงูุชูุฑูุง

ุจุฑุง ูุฑ ฺฉุงูุชูุฑ ุฌุฏุงฺฏุงูู:

ูุฒุงู CPU ุฏุฑ ูุญุธู

ูุตุฑู ุญุงูุธู (Used, Cache, RSS)

ูุตุฑู I/O ุฏุณฺฉ

ุดุจฺฉู ูุฑูุฏ ู ุฎุฑูุฌ

Load ูุฑุจูุท ุจู ฺฉุงูุชูุฑ

โ 2) ูุฏุฑุช ู ุซุจุช ุชุงุฑุฎฺู ูุตุฑู

cAdvisor ุจูโุตูุฑุช ูพุดโูุฑุถ history ฺฉู ูฺฏู ูโุฏุงุฑุฏุ ูู ููุช ุจู Prometheus ูุตู ุดูุฏ โ ุชุงุฑุฎฺู ฺฉุงูู ู ุจููุฏูุฏุช.

โ 3) ุงุฑุงุฆู Interface ุฏุงุดุจูุฑุฏ ุชุญุช ูุจ

ุจูโุทูุฑ ูุณุชูู ฺฉ UI ุณุจฺฉ ุจุง ุขุฏุฑุณ:
```
http://SERVER_IP:8080
```

ฺฉู ุงุทูุงุนุงุช ฺฉุงูู ุฑุง ูุดุงู ูโุฏูุฏ.

โ 4) Export Metrics ุจุฑุง Prometheus / Grafana

ูููโุชุฑู ฺฉุงุฑุจุฑุฏ cAdvisor ุงู ุงุณุช ฺฉู ุจุนููุงู Exporter ุนูู ูโฺฉูุฏ.

Prometheus โ Metrics ุฑุง ูโฺฏุฑุฏ
Grafana โ Dashboard ูโุณุงุฒุฏ

ุจูุงุจุฑุงู ฺฉ Monitoring Full-Stack Docker ุฏุงุฑู.

โ 5) ุจุฏูู ูุงุฒ ุจู ุชูุธูุงุช ุฎุงุต

ุงุฌุฑุงุด ูุนูููุงู ููุท ูุงุฒ ุฏุงุฑุฏ:
```
โmount ฺฉุฑุฏู Docker socket
```
mount ฺฉุฑุฏู cgroupโูุง

๐ ฺุฑุง ุงุณุชูุงุฏู ุงุฒ cAdvisor ุถุฑูุฑ ุงุณุชุ

ุงฺฏุฑ Docker ุฏุฑ ุณุฑูุฑ ุงุฌุฑุง ูโฺฉูุ ุงูโูุง ุฑุง ูุงุฒู ุฏุงุฑ:

ุจุฏูู cAdvisor:

โ ููโููู ฺฉุฏูู ฺฉุงูุชูุฑ RAM ูโุฎูุฑู
โ ููโุฏูู CPU ฺุฑุง ูุงฺฏูุงู 100% ุดุฏู
โ ููโุฏูู ฺู ฺฉุงูุชูุฑ I/O ุฏุณฺฉ ุฑุง ฺฉูุฏ ฺฉุฑุฏู
โ ูุงูุชูุฑูฺฏ ุฏูู per-container ูุฏุงุฑ

ุจุง cAdvisor:

โ ฺุงุฑุช ฺฉุงูู ูุตุฑู ููุงุจุน ูุฑ ฺฉุงูุชูุฑ
โ ูพุฏุง ฺฉุฑุฏู Bottleneckูุง
โ ูพุฏุง ฺฉุฑุฏู Memory Leak
โ ุจุฑุฑุณ Scaling
โ ุงุชุตุงู ุจู Grafana/Prometheus

๐ ุฑุงูโุงูุฏุงุฒ cAdvisor ุจุง Docker Compose

ูุงู ฺฉุงูู ุขูุงุฏู:
```
version: '3'

services:
  cadvisor:
    image: gcr.io/cadvisor/cadvisor:latest
    container_name: cadvisor
    restart: always
    ports:
      - "8080:8080"
    volumes:
      - /:/rootfs:ro
      - /var/run:/var/run:rw
      - /sys:/sys:ro
      - /var/lib/docker/:/var/lib/docker:ro
```
ุชูุถุญ Mountูุง:
ูุณุฑ	ฺฉุงุฑุจุฑุฏ
```
/rootfs	ุฏุณุชุฑุณ ุจู ูุงูโุณุณุชู ฺฉุงูู
/var/run	ุฏุณุชุฑุณ ุจู docker.sock
/sys	ุฏุณุชุฑุณ ุจู kernel metrics
/var/lib/docker	ุงุทูุงุนุงุช ฺฉุงูุชูุฑูุง
```
๐ฅ ฺุทูุฑ ูุงุฑุฏ ุฏุงุดุจูุฑุฏ cAdvisor ุดููุ

ุฏุฑ ูุฑูุฑฺฏุฑ:
```
http://SERVER_IP:8080
```

ุฏุงุดุจูุฑุฏ ุดุงูู:
```
CPU Usage graph

Memory Usage graph

Network I/O

Disk Ops

Processes Running
```
ฺฉุงูุชูุฑูุง ู Subsystem ูุง

๐งช ุงุฒ ฺฉุฌุง ุจูููู cAdvisor ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูุฏุ

ุชุณุช:
```
curl http://localhost:8080/metrics
```

ุงฺฏุฑ ุงุทูุงุนุงุช Prometheus ูุงููุฏ ุฏุฏ โ OK

๐ ุงุชุตุงู ุจู Prometheus

ุชููุง ฺฉุงุฑ ฺฉู ุจุงุฏ ุจฺฉู:

ุฏุฑ ูุงู prometheus.yml ุงุถุงูู ฺฉู:
```
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['cadvisor:8080']
```

ุจุนุฏ ุฏุฑ Grafana โ Dashboard ุขูุงุฏูู cAdvisor ุงุถุงูู ูโฺฉู.

๐ ููุงุณู cAdvisor ุจุง ุงุจุฒุงุฑูุง ูุดุงุจู
ุงุจุฒุงุฑ	ุนููฺฉุฑุฏ
Docker Stats	ุงุทูุงุนุงุช ูุญุธูโุง ุณุงุฏู
cAdvisor	ุงุทูุงุนุงุช ฺฉุงูู + UI + Metrics
Node Exporter	Metrics ฺฉู ุณุณุชูุ ูู ฺฉุงูุชูุฑ
Prometheus	ุฐุฎุฑู ุชุงุฑุฎฺู
Grafana	ฺฏุฒุงุฑุด + ฺุงุฑุช

```
cAdvisor + Prometheus + Grafana = ุจูุชุฑู ูุงูุชูุฑูฺฏ Docker
```

---

